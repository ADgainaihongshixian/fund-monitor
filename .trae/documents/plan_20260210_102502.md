# 解决API跨域错误的实施方案

## 问题分析

用户遇到了以下错误：
1. **CORS跨域错误**：浏览器阻止了从 `http://localhost:5173` 到 `http://fundgz.1234567.com.cn/js/009239.js` 的请求
2. **网络错误**：`AxiosError: Network Error`

## 原因分析

当前项目已经配置了Vite代理，但在修改API接口时，直接将BASE_URL设置为了 `http://fundgz.1234567.com.cn`，这导致请求直接发送到了该域名，而不是通过代理发送。

## 解决方案

### 1. 配置Vite代理

在 `vite.config.ts` 中添加一个新的代理配置，用于代理天天基金网的请求：

```typescript
'/api/fundgz': {
  target: 'http://fundgz.1234567.com.cn',
  changeOrigin: true,
  rewrite: (path) => path.replace(/^\/api\/fundgz/, ''),
  headers: {
    'Referer': 'http://fundgz.1234567.com.cn/',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
  }
}
```

### 2. 修改API基础URL

在 `api.ts` 中修改BASE_URL，使用代理路径：

```typescript
// API基础URL - 使用Vite代理
const BASE_URL = '/api/fundgz';
```

### 3. 验证修改

- 重新启动开发服务器
- 测试API请求是否正常工作
- 确认跨域错误已解决

## 实施步骤

1. **修改vite.config.ts**：添加新的代理配置
2. **修改api.ts**：更新BASE_URL为代理路径
3. **测试验证**：确保API请求正常工作

## 预期效果

- 跨域错误消失
- API请求正常发送和接收
- 基金实时估值数据能够正常获取